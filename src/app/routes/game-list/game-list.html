<app-settings-panel
    [visible]="settingsVisible()"
    (closePressed)="hideSettings()"
/>

@if(failed()) {
<header>
    <div class="title-container">
        <h1>Steam Game Tracker</h1>

        <button>
            <img class="img-icon-settings" (click)="showSettings()" src="settings-2-svgrepo-com.svg">
        </button>
    </div>
</header>
<div style="height: 200px"></div>
<h2>Error</h2>
}

@else if(!loaded()) {
<header>
    <div class="title-container">
        <h1>Steam Game Tracker</h1>

        <button>
            <img class="img-icon-settings" (click)="showSettings()" src="settings-2-svgrepo-com.svg">
        </button>
    </div>
</header>
<div style="height: 200px"></div>
<h2>Loading...</h2>
}

@else {

<app-random-games-panel 
    [visible]="randomGamesVisible()"
    [games]="randomGames()"
    (closePressed)="hideRandomGames()"
/>

<header>
    <div class="title-container">
        <h1>Steam Game Tracker</h1>

        <button>
            <img class="img-icon-settings" (click)="showSettings()" src="settings-2-svgrepo-com.svg">
        </button>
    </div>
    <div class="search-container">
        <input class="search-bar" [(ngModel)]="searchTerm" placeholder="Search games...">
        <!-- <input type="button" [(ngModel)]="filterNotPlayed" [value]="'nameFilter()'"> -->
        <button class="btn-search-option" [ngClass]="{'toggled': filterNotPlayed()}" (click)="filterNotPlayed.set(!filterNotPlayed())">🔻Unplayed</button>
        <button class="btn-search-option" (click)="showRandomGames()">🎲Random 3</button>
        <button class="btn-search-option" (click)="progressTracker.clearProgress()">🗑️Clear Data</button>
        
        <!-- <form>
            <input name="searchTerm" [(ngModel)]="searchTerm" placeholder="Search games...">
            <br>
            <label for="filterNotPlayed">Only not played: </label>
            <input type="button" name="filterNotPlayed" [(ngModel)]="filterNotPlayed" value="nameFilter()">
        </form>
        <button (click)="progressTracker.clearProgress()">Clear Data</button> -->
    </div>
</header>


<div style="height: 200px"></div>

<div class="game-list">
    @for(game of games() | filterGamesByName : searchTerm() | filterGamesByPlayed : false : filterNotPlayed(); track game.appid) {
        <app-game-list-item 
            [game]="game" 
            [played]="progressTracker.getPlayed(game.appid)"
            (playedChanged)="onPlayedChanged(game.appid, $event)"    
        />
    }
</div>

}